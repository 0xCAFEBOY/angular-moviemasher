"use strict";MovieMasher.Filter.register("convolution",{render:function(a,b,c){var d,e,f,g,h=function(a){var b,c,d,e,f,g={bias:{},rdiv:{},matrix:{}},h="rgba";for(e=0;4>e;e++){for(b=String(e),f=h[e],g.matrix[f]=a[b+"m"].split(" "),d=g.matrix[f].length,c=0;d>c;c++)g.matrix[f][c]=parseInt(g.matrix[f][c]);g.rdiv[f]=a[b+"rdiv"]||1,-1<String(g.rdiv[f]).indexOf("/")?(g.rdiv[f]=g.rdiv[f].split("/"),g.rdiv[f]=parseFloat(g.rdiv[f][0])/parseFloat(g.rdiv[f][1])):g.rdiv[f]=parseFloat(g.rdiv[f]),g.bias[f]=a[b+"bias"]||0}return g},i=function(a,b,c,d){var e,f=new Uint8ClampedArray(d+2),g=4*a*d+b;for(e=0;d>e;e++)f[e+1]=c[g],g+=4;return f[d+1]=f[1],f[0]=f[d],f},j=function(a,b,c){var f,g,h,j,k,l,m,n,o,p,q,r="rgba";for(l=0;4>l;l++)for(n=r[l],h=a.rdiv[n],g=a.matrix[n],f=a.bias[n],o=i(1,l,b,d),p=i(0,l,b,d),k=0;e>k;k++){for(q=i(k+(e-1>k?1:-1),l,b,d),m=0;d>m;m++)j=o[m]*g[0],j+=o[m+1]*g[1],j+=o[m+2]*g[2],j+=p[m]*g[3],j+=p[m+1]*g[4],j+=p[m+2]*g[5],j+=q[m]*g[6],j+=q[m+1]*g[7],j+=q[m+2]*g[8],j=Math.floor(j*h+f+.5),c[4*(k*d+m)+l]=j;o=p,p=q}},k=h(c),l=a[0];d=l.canvas.width,e=l.canvas.height,f=l.context.getImageData(0,0,d,e),g=f.data;var m=l.context.createImageData(d,e),n=m.data;return j(k,g,n),l.context.putImageData(m,0,0),a}});